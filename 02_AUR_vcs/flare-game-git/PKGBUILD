# Contributor: dorkster <jajdorkster@gmail.com>

pkgname=flare-game-git
pkgver=1.06.r51.ga71899bf
pkgrel=1
pkgdesc="Fantasy action RPG using the FLARE engine - Git version"
url="http://www.flarerpg.org/"
license=('CCPL:cc-by-sa')
arch=(i686 x86_64)
makedepends=(git cmake)
depends=(flare-engine-git)
provides=(flare-game)
conflicts=(flare-game)
source=("${pkgname}::git+https://github.com/clintbellanger/flare-game")
sha1sums=('SKIP')

pkgver() {
  cd "$srcdir/${pkgname/-git/}"
  git describe --long --tags | sed 's/^v//;s/\([^-]*-g\)/r\1/;s/-/./g'
}

build() {
  cd "$srcdir/${pkgname/-git/}"
  cmake -DCMAKE_INSTALL_PREFIX=/usr -DDATADIR=share/flare
  make
}

package() {
  cd "$srcdir/${pkgname/-git/}"
  make install DESTDIR=$pkgdir
}
