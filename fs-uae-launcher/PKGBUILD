#
# PKGBUILD for fs-uae-launcher
#
# Contributor: Uffe Jakobsen <uffe@uffe.org>
# Maintainer: Uffe Jakobsen <uffe@uffe.org>
#
pkgname=fs-uae-launcher
pkgver=2.8.3
pkgrel=1
epoch=
pkgdesc=""
arch=('any')
url=http://fs-uae.net/launcher
_pkgname=${pkgname}
_pkgver=${pkgver}
_pkgsrcdir=
_pkgurl="http://fs-uae.net/fs-uae/stable/${_pkgver}/${_pkgname}-${_pkgver}.tar.gz"
license=('GPL2')
groups=()
license=("GPL2")
#depends=("fs-uae" "python2-pyqt4" "python2-setuptools" "python2-six" "hicolor-icon-theme" "xdg-utils")
depends=("fs-uae" "python-pyqt5" "python-setuptools" "python-six" "hicolor-icon-theme" "xdg-utils")
makedepends=()
checkdepends=()
optdepends=("p7zip: for .7z zip support")
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
#source=("${_pkgurl}" "remove_inbuilt_six.patch")
source=("${_pkgurl}")
noextract=()

md5sums=('6afb73337cdeaca9339264350e4a5d17')
sha1sums=('76bd61a8887d17029af7ceaa9d31d2e1097858ed')
sha256sums=('8ce764031013516daab76e996eff9e9fdead6c0f00b4e497fc927f7719d8a233')
sha384sums=('08fb1f551009715b29bb54c5cce0a7df3b2013a63e794203a1261ad2f2a8aa219c049c9954e02d18e661af745d5e1bf9')
sha512sums=('4eaa5979fe2e8f2c792d4878e9a9ad0a0433206aac42aa380d97aee21e4ba29a54caced2437b83357c2c4d2fab121bfb821fdb8a883ead971766866b02067a2d')

prepare() {
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
}

build() {
  # Patch to remove the packaged version of python-six
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
  #patch -N -i ../../remove_inbuilt_six.patch
  patch -N -i ../../fs-uae-launcher.patch
  make all
}

check() {
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
  #make -k check
}

package() {
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
  python3 setup.py install --root="${pkgdir}/" --install-lib=/usr/share/fs-uae-launcher --optimize=1
}

# EOF
