#
# PKGBUILD for fs-uae-launcher
#
# Contributor: Uffe Jakobsen <uffe@uffe.org>
# Maintainer: Uffe Jakobsen <uffe@uffe.org>
#
pkgname=fs-uae-launcher
pkgver=2.8.2
pkgrel=1
epoch=
pkgdesc=""
arch=('any')
url=http://fs-uae.net/launcher
_pkgname=${pkgname}
_pkgver=${pkgver}
_pkgsrcdir=
_pkgurl="http://fs-uae.net/fs-uae/stable/${_pkgver}/${_pkgname}-${_pkgver}.tar.gz"
license=('GPL2')
groups=()
license=("GPL2")
#depends=("fs-uae" "python2-pyqt4" "python2-setuptools" "python2-six" "hicolor-icon-theme" "xdg-utils")
depends=("fs-uae" "python-pyqt5" "python-setuptools" "python-six" "hicolor-icon-theme" "xdg-utils")
makedepends=()
checkdepends=()
optdepends=("p7zip: for .7z zip support")
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
#source=("${_pkgurl}" "remove_inbuilt_six.patch")
source=("${_pkgurl}")
noextract=()

md5sums=('fc4be7844c21c905074872dc4fc8be6a')
sha1sums=('22a0accc5076617c7703407fde412ca19f23a8af')
sha256sums=('34e40e11ffbc62a041e6b91101e6448586c6eedadf631f0e6bca0bfa55eff021')
sha384sums=('9312f44b2fbba0aea3c1ca288a35ef6a03960cc5b040417e005d79dd89bbb9119a3284b76534adc938bd1518c383f640')
sha512sums=('ba2a0f6d0771b5c6cd212c9807d1882884fce55fc87654b6a0c522c24ae1b3e7ea8c668306d93c64bdded4c0c0e463b93970be247604905d8f4b3c1c1f37d5a0')

prepare() {
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
}

build() {
  # Patch to remove the packaged version of python-six
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
  #patch -N -i ../../remove_inbuilt_six.patch
  patch -N -i ../../fs-uae-launcher.patch
  make all
}

check() {
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
  #make -k check
}

package() {
  cd "${srcdir}/${_pkgname}-${_pkgver}/${_pkgsrcdir}"
  python3 setup.py install --root="${pkgdir}/" --install-lib=/usr/share/fs-uae-launcher --optimize=1
}

# EOF
